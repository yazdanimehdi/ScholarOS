---
import { getSiteConfig, isPersonalMode } from '../../lib/config';
import { getImageShapeClass } from '../../lib/imageShape';

const config = getSiteConfig();
const about = config.about;
const personal = isPersonalMode();
const show = !!about?.enabled;
const title = about?.title ?? (personal ? 'About Me' : 'About Our Lab');
const hasImage = !!about?.image;
const shapeClass = getImageShapeClass();
---

{show && (
  <section class="border-b border-surface-200 dark:border-dm-border bg-surface-50 dark:bg-dm">
    <div class="max-w-[930px] mx-auto px-4 sm:px-6 py-10 sm:py-14">
      <h2 class="text-2xl sm:text-3xl font-serif font-normal text-surface-900 dark:text-dm-heading mb-6">
        {title}
      </h2>
      <div class:list={["flex flex-col gap-8", hasImage && "md:flex-row"]}>
        <div class:list={[hasImage ? "md:flex-1" : "w-full"]}>
          <p class="text-base text-surface-600 dark:text-dm-muted leading-relaxed">
            {about!.text}
          </p>
        </div>
        {hasImage && (
          <div class="md:w-[280px] flex-shrink-0">
            <img
              src={about!.image}
              alt={title}
              width="280"
              height="280"
              class:list={["w-full object-cover", shapeClass]}
              loading="lazy"
              decoding="async"
            />
          </div>
        )}
      </div>
    </div>
  </section>
)}
