---
interface Heading {
  depth: number;
  slug: string;
  text: string;
}

interface Props {
  headings: Heading[];
}

const { headings } = Astro.props;
const filteredHeadings = headings.filter(h => h.depth >= 2 && h.depth <= 3);
---

{filteredHeadings.length > 0 && (
  <nav class="sticky top-20 text-sm" aria-label="Table of contents">
    <h2 class="text-xs font-medium uppercase tracking-wider text-surface-400 dark:text-dm-faint mb-2">
      Contents
    </h2>
    <ul class="space-y-1 border-s border-surface-200 dark:border-dm-border">
      {filteredHeadings.map(heading => (
        <li>
          <a
            href={`#${heading.slug}`}
            class:list={[
              'block py-0.5 text-surface-500 hover:text-primary-600 dark:text-dm-muted dark:hover:text-accent-400 transition-colors border-s-2 border-transparent hover:border-primary-600 dark:hover:border-accent-400 -ms-px',
              heading.depth === 2 ? 'ps-3' : 'ps-5',
            ]}
          >
            {heading.text}
          </a>
        </li>
      ))}
    </ul>
  </nav>
)}
