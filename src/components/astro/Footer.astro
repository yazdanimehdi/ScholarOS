---
import SocialLinks from './SocialLinks.astro';
import NewsletterForm from '../vue/NewsletterForm.vue';
import { getSiteConfig, getSiteName } from '../../lib/config';

const config = getSiteConfig();
const siteName = getSiteName();
const currentYear = new Date().getFullYear();
---

<footer class="border-t border-surface-200 dark:border-dm-border mt-12">
  <div class="max-w-[930px] mx-auto px-4 sm:px-6 py-6">
    {config.newsletter?.enabled && config.newsletter?.accessKey && (
      <div class="border-b border-surface-200 dark:border-dm-border pb-6 mb-6">
        <h3 class="text-base font-serif font-normal text-surface-900 dark:text-dm-heading mb-1">
          {config.newsletter.heading || 'Stay Updated'}
        </h3>
        {config.newsletter.text && (
          <p class="text-sm text-surface-500 dark:text-dm-muted mb-3">
            {config.newsletter.text}
          </p>
        )}
        <NewsletterForm client:visible accessKey={config.newsletter.accessKey} />
      </div>
    )}

    <div class="flex flex-col sm:flex-row justify-between items-center gap-3 text-sm text-surface-500 dark:text-dm-muted">
      <p>
        &copy; {currentYear} {siteName}. Powered by <a href="https://astro.build" class="underline text-surface-600 dark:text-dm-text hover:text-primary-600 dark:hover:text-accent-400">Astro</a>.
      </p>
      <div class="flex items-center gap-4">
        <SocialLinks socials={config.socials} size="sm" />
      </div>
    </div>
  </div>
</footer>
